(this["webpackJsonpcrossword-maker"]=this["webpackJsonpcrossword-maker"]||[]).push([[0],{71:function(e,t,n){e.exports=n(84)},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(9),c=n.n(o),i=(n(76),n(5)),l=n(10),u=n(11),s=n(3),d=(n(77),n(78),"ACROSS"),m="DOWN",f=function(e){return e===d},p=function(e){return"."===e},h="UNDO",b="REDO",g="UPDATE_WORD_TO_CLUE",v="UPDATE_GRID",O="SET_CURRENT_WORD",w="SET_SELECTED_SQUARE",y="SET_CLUE_FOCUS";function E(e){var t=e.grid,n=e.selected,r=e.currentWord,o=e.hideAnswers,c=e.onClick,i=t.size,l=i.rows,s=i.cols,d=Object(u.a)(Array(l*s).keys()).map((function(e){var i=Math.floor(e/s),l=Math.floor(e%s),u=t.grid[e],d=["Grid-item"],m=[];n&&n.row===i&&n.column===l?d.push("Grid-item-selected"):p(u)?d.push("Grid-item-blocked"):r&&r.coordinates.some((function(e){return e[0]===i&&e[1]===l}))&&d.push("Grid-item-highlight"),t.circles[e]&&m.push("Grid-item-circled"),"undefined"!==typeof t.darkens&&t.darkens[e]&&d.push("Grid-item-darkened");var f=d.join(" "),h=m.join(" "),b={fontSize:"".concat(1/u.length*1.1,"em")};return a.a.createElement("div",{key:e,className:f,onClick:function(){return c({row:i,column:l})}},a.a.createElement("span",{className:"Grid-number"},t.gridnums[e]>0?t.gridnums[e]:""),a.a.createElement("span",{className:h,style:b},o?" ":u))}));return a.a.createElement("div",{style:{gridTemplateColumns:"repeat(".concat(s,", 1fr)"),gridTemplateRows:"repeat(".concat(l,", 1fr)")},className:"Grid-container"},d)}var j=n(122),k=n(129),C=n(130),S=n(124),z=n(55),P=n(126),R=n(128),W=n(127);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=Object(j.a)((function(e){return{title:{backgroundColor:"rgba(255,255,255,1)"},list:{width:200}}})),x=function(e){if(!e)return e;e=e.toUpperCase();var t=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"\u2318":"Ctrl";return 3===(e=(e=e.replace("MOD",t)).replace("SHIFT","\u21e7")).length&&(e=e.replace("+","")),e};function L(e){var t=e.title,n=e.items,r=N(),o=a.a.useState(null),c=Object(l.a)(o,2),i=c[0],u=c[1],s=function(){u(null)};return a.a.createElement("div",null,a.a.createElement(S.a,{size:"small",onClick:function(e){u(e.currentTarget)}},t),a.a.createElement(z.a,{anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:s,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{className:r.list}},n.map((function(e,t){return a.a.createElement(P.a,{key:t,onClick:(n=e.action,function(e){n(),s()}),dense:!0},a.a.createElement(W.a,{primary:e.label}),a.a.createElement(R.a,null,x(e.key)));var n}))))}function I(e){var t=e.actions,n=t.handleSavePuzzle,r=t.handleImportPuzzle,o=t.handleCreateNewPuzzle,c=[D({label:"Save Puzzle"},n),D({label:"Load Puzzle"},r),D({label:"New Puzzle"},o)];return a.a.createElement(L,{title:"File",items:c})}function A(e){var t=e.actions,n=t.handleUndo,r=t.handleRedo,o=[D({label:"Undo"},n),D({label:"Redo"},r)];return a.a.createElement(L,{title:"Edit",items:o})}function F(e){var t=e.actions,n=t.handleInsertRebus,r=t.handleInsertBlockedSquare,o=[D({label:"Rebus"},n),D({label:"Blocked Square"},r)];return a.a.createElement(L,{title:"Insert",items:o})}function U(e){var t=N();return e.actions?a.a.createElement(k.a,{position:"static"},a.a.createElement(C.a,{className:t.title},a.a.createElement(I,e),a.a.createElement(A,e),a.a.createElement(F,e))):null}var M=n(125),G=n(87),_=n(27),B=null,J=Object(r.memo)((function(e){var t=e.currentWord,n=e.onClick,o=Object(r.useState)(B||[]),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(r.useState)([]),d=Object(l.a)(s,2),m=d[0],f=d[1],p=Object(r.useCallback)(Object(_.debounce)((function(e){f(i.filter((function(t){return t.match(e)})))}),300),[i]);Object(r.useEffect)((function(){fetch("".concat("/xwordmaker","/wordlist/wordlist.txt")).then((function(e){return e.text()})).then((function(e){return e.split("\n").filter((function(e){return!e.startsWith("#")}))})).then((function(e){return function(e){B=e,u(e)}(e)}))}),[]),Object(r.useEffect)((function(){p(new RegExp("^"+t.word+"$","i"))}),[i,t.word,p]);return a.a.createElement("div",null,"Words: ",m.length>100?"showing ".concat(100,"/"):"",m.length,a.a.createElement(M.a,{dense:!0},m.slice(0,100).map((function(e){return a.a.createElement(G.a,{button:!0,onClick:function(){return n(e)},key:e},e)}))))})),H=n(36),V=function(e,t,n){return e.size.cols*t+n},q=function(e,t,n){return e.grid[V(e,t,n)]},Y=n(45),K=n.n(Y),Q=function e(t){var n=this;Object(H.a)(this,e),this.right=function(){n.setSelected({row:n.selected.row,column:Math.min(n.width-1,n.selected.column+1)})},this.left=function(){n.setSelected({row:n.selected.row,column:Math.max(0,n.selected.column-1)})},this.up=function(){n.setSelected({row:Math.max(0,n.selected.row-1),column:n.selected.column})},this.down=function(){n.setSelected({row:Math.min(n.height-1,n.selected.row+1),column:n.selected.column})},this.moveForward=function(){f(n.currentWord.direction)?n.right():n.down()},this.moveBack=function(){f(n.currentWord.direction)?n.left():n.up()};var r=t.selected,a=t.width,o=t.height,c=t.currentWord,i=t.setSelected;this.width=a,this.height=o,this.selected=r,this.setSelected=i,this.currentWord=c},$=function e(t){var n=this;Object(H.a)(this,e),this.setRotationalSymettry=function(e){n.grid.grid[V(n.grid,n.rows-n.selected.row-1,n.cols-n.selected.column-1)]=e},this.handleBackspace=function(e){var t=n.grid,r=n.selected,a=n.movement,o=n.updateGrid,c=q(t,r.row,r.column);p(c)&&n.setRotationalSymettry("");var i=V(t,r.row,r.column);t.grid[i]="",t.circles[i]=0,a.moveBack(),o(t)},this.handleLetter=function(e){var t;t=e.key?e.key.toUpperCase():e.toUpperCase();var r=n.grid,a=n.selected,o=n.movement,c=n.updateGrid;if(a)if("."===t)r.grid[V(r,a.row,a.column)]=t,n.setRotationalSymettry(t),o.moveForward(),c(r);else if(e.shiftKey)r.grid[V(r,a.row,a.column)]+=t,c(r);else{var i=q(r,a.row,a.column);if(i===t)return void o.moveForward();p(i)&&n.setRotationalSymettry(""),r.grid[V(r,a.row,a.column)]=t,o.moveForward(),c(r)}},this.handleCircle=function(e){var t=n.grid,r=n.selected,a=n.movement,o=n.updateGrid;r&&(t.circles[V(t,r.row,r.column)]=e,a.moveForward(),o(t))},this.handleDarken=function(e){var t=n.grid,r=n.selected,a=n.movement,o=n.updateGrid;r&&(t.darkens[V(t,r.row,r.column)]=e,a.moveForward(),o(t))},this.handleSpace=function(e){var t=n.setCurrentWord,r=n.currentWord;t(Object.assign({},r,{direction:f(r.direction)?m:d}))},this.handleLeft=function(){n.movement.left()},this.handleRight=function(){n.movement.right()},this.handleUp=function(){n.movement.up()},this.handleDown=function(){n.movement.down()},this.selected=t.selected,this.setSelected=t.setSelected,this.currentWord=t.currentWord,this.setCurrentWord=t.setCurrentWord,this.grid=Object(_.cloneDeep)(t.grid),this.updateGrid=t.updateGrid,this.rows=t.grid.size.rows,this.cols=t.grid.size.cols,this.movement=new Q({width:t.grid.size.cols,height:t.grid.size.rows,setSelected:t.setSelected,currentWord:t.currentWord,selected:t.selected})},X="MOVE_UP",Z="MOVE_LEFT",ee="MOVE_RIGHT",te="MOVE_DOWN",ne="ENTER_LETTER",re="BACKSPACE",ae="SPACE",oe=Object(j.a)((function(e){return{noOutline:{"&:focus":{outline:0}}}}));function ce(e){var t,n,o=oe(),c=Object(r.useState)(!1),u=Object(l.a)(c,2),s=u[0],d=u[1],m=e.extraActions,f=e.keyPressHandler,p=(t={},Object(i.a)(t,X,"up"),Object(i.a)(t,te,"down"),Object(i.a)(t,Z,"left"),Object(i.a)(t,ee,"right"),Object(i.a)(t,ne,"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split("")),Object(i.a)(t,re,["del","backspace"]),Object(i.a)(t,ae,"space"),t),h=(n={},Object(i.a)(n,X,f.handleUp),Object(i.a)(n,te,f.handleDown),Object(i.a)(n,Z,f.handleLeft),Object(i.a)(n,ee,f.handleRight),Object(i.a)(n,ne,f.handleLetter),Object(i.a)(n,re,f.handleBackspace),Object(i.a)(n,ae,f.handleSpace),n);m&&Object.keys(m).forEach((function(e){p[e]=m[e].key,h[e]=function(t){return m[e].action(),!1}}));var b=function(e){return function(t){d(e)}};return Object(r.useEffect)((function(){return Object.keys(p).forEach((function(e){var t;K.a.bind(p[e],(t=h[e],function(e){return s&&t(e)}))})),function(){Object.keys(p).forEach((function(e){K.a.unbind(p[e])}))}})),a.a.createElement("div",{ref:e.forwardRef,className:o.noOutline,onFocus:b(!0),onBlur:b(!1),tabIndex:"-1"},e.children)}var ie=n(139),le=n(131),ue=n(33),se=Object(j.a)((function(e){return{focused:{}}}));function de(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.textContent}function me(e){var t=e.word,n=e.clue,r=e.dir,o=e.currentWord,c=e.onClick,i=e.onBlur,l=(se(),+n.match(/^ *[0-9]+/)[0].trim()),u=de(n.replace(/^ *[0-9]*\. */,"")),d=t.match("_"),m=!d&&!u.length,f=o.clueNum===l&&o.direction===r,p=Object(s.a)({"Mui-focused":f});return a.a.createElement(ie.a,{label:"".concat(l,": ").concat(t),defaultValue:u,type:"text",margin:"dense",variant:"outlined",fullWidth:!0,onClick:c(r,l),onBlur:i(r,t),disabled:d,error:m,InputLabelProps:{className:p},InputProps:{className:p}})}var fe=Object(r.memo)((function(e){var t=e.grid,n=e.currentWord,r=e.onClueFocus,o=e.onClueChanged,c=function(e,t){return function(n){r(e,t)}},i=function(e,t){return function(n){o(e,t,n.target.value)}},l=function(e){var n=e.toLowerCase();return t.clues[n].length},u=function(e){var r=e.toLowerCase();return t.clues[r].map((function(o,l){var u=t.answers[r][l];return a.a.createElement(me,{key:"".concat(r,"-").concat(l,"-").concat(u),word:u,clue:o,dir:e,currentWord:n,onClick:c,onBlur:i})}))},s=u(d),f=u(m),p=l(d)+l(m);return a.a.createElement("div",null,a.a.createElement(le.a,{container:!0,spacing:1},a.a.createElement(le.a,{item:!0,xs:!0},a.a.createElement(ue.a,null,"Across"),s),a.a.createElement(le.a,{item:!0,xs:!0},a.a.createElement(ue.a,null,"Down"),f)),a.a.createElement(ue.a,null,"Total: ",p))}));function pe(e){var t=e.grid,n={margin:0,listStyleType:"none"},r=function(e){var t=+e.match(/^ *[0-9]+/)[0].trim(),r=de(e.replace(/^ *[0-9]*\. */,""));return a.a.createElement("li",{style:n,key:e},a.a.createElement("b",{style:{marginRight:2}},t),r)};return a.a.createElement("div",{style:{marginTop:40,marginRight:20,marginLeft:20,height:"calc(100vh - 40px)"}},a.a.createElement("div",{style:{float:"right",width:"50vmin",height:"50vmin"}},a.a.createElement(E,{grid:t,hideAnswers:!0})),a.a.createElement("ul",{style:{width:"calc(50vw - 40px)",columnCount:2,margin:0,padding:0}},a.a.createElement("li",{style:n},a.a.createElement("b",null,"ACROSS")),t.clues.across.map(r),a.a.createElement("li",{style:n},a.a.createElement("b",null,"DOWN")),t.clues.down.map(r)))}var he=n(142),be=n(135),ge=n(133),ve=n(134),Oe=n(132),we=Object(j.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function ye(e){var t=e.onSave,n=e.open,r=e.setOpen,o=we(),c=a.a.useState({rows:15,cols:15}),u=Object(l.a)(c,2),s=u[0],d=u[1],m=function(e){return function(){r(!1),e&&t(s)}},f=function(e){return function(t){d(Object.assign({},s,Object(i.a)({},e,+t.target.value||"")))}};return a.a.createElement(he.a,{open:n,onClose:m(!1)},a.a.createElement(Oe.a,null,"Create New Puzzle"),a.a.createElement(ge.a,null,a.a.createElement(ve.a,null,"Create a new puzzle. Warning! This will destroy the current puzzle. Make sure to save first!"),a.a.createElement(ie.a,{label:"Rows",value:s.rows,onChange:f("rows"),className:o.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}}),a.a.createElement(ie.a,{label:"Columns",value:s.cols,onChange:f("cols"),className:o.textField,type:"number",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{min:1,max:100}})),a.a.createElement(be.a,null,a.a.createElement(S.a,{onClick:m(!1),color:"primary"},"Cancel"),a.a.createElement(S.a,{onClick:m(!0),color:"primary"},"Create")))}var Ee=Object(j.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function je(e){var t=e.onSave,n=e.open,r=e.setOpen,o=Ee(),c=a.a.useState(""),i=Object(l.a)(c,2),u=i[0],s=i[1],d=function(e){return function(){r(!1),e&&t(u)}};return a.a.createElement(he.a,{open:n,onClose:d(!1)},a.a.createElement(Oe.a,null,"Insert Rebus"),a.a.createElement(ge.a,null,a.a.createElement(ve.a,null,"Add a rebus"),a.a.createElement(ie.a,{label:"Text",value:u,onChange:function(e){s(e.target.value.toUpperCase())},className:o.textField,type:"text",InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined",inputProps:{}})),a.a.createElement(be.a,null,a.a.createElement(S.a,{onClick:d(!1),color:"primary"},"Cancel"),a.a.createElement(S.a,{onClick:d(!0),color:"primary"},"Save")))}var ke=Object(r.forwardRef)((function(e,t){var n=e.onSavePuzzle,o=e.onImportPuzzle,c=e.onCreateNewPuzzle,i=e.onUndo,u=e.onRedo,s=e.onRebus,d=e.onCircle,m=e.onDarken,f=a.a.useState(!1),p=Object(l.a)(f,2),h=p[0],b=p[1],g=a.a.useState(!1),v=Object(l.a)(g,2),O=v[0],w=v[1],y=a.a.useRef(),E=function(){y.current.click()},j=function(){b(!0)},k=function(){w(!0)};return Object(r.useImperativeHandle)(t,(function(){return{handleSavePuzzle:{key:"mod+s",action:n},handleImportPuzzle:{key:"mod+o",action:E},handleCreateNewPuzzle:{key:"mod+u",action:j},handleUndo:{key:"mod+z",action:i},handleRedo:{key:"mod+shift+z",action:u},handleInsertRebus:{key:"mod+i",action:k},handleInsertBlockedSquare:{key:".",action:function(){return s(".")}},handleInsertCircledLetter:{key:"mod+c",action:function(){return d()}},handleDarkenCell:{key:"mod+b",action:function(){return m()}}}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{ref:y,type:"file",style:{display:"none"},onChange:o}),a.a.createElement(ye,{open:h,setOpen:b,onSave:c}),a.a.createElement(je,{open:O,setOpen:w,onSave:s}))}));function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze=25;function Pe(e,t){for(var n=e.size,r=n.rows,a=n.cols,o={gridnums:e.grid.map((function(e){return 0})),answers:{down:[],across:[]},clues:{down:[],across:[]}},c=1,i=0;i<r;++i)for(var l=0;l<a;++l)if(!p(q(e,i,l))){var u=(0===i||p(q(e,i-1,l)))&&!(i===r||p(q(e,i+1,l))),s=(0===l||p(q(e,i,l-1)))&&!(l===a||p(q(e,i,l+1)));if((s||u)&&(o.gridnums[V(e,i,l)]=c++),s){for(var d="",m=l;!p(q(e,i,m))&&m<a;){var f=q(e,i,m);d+=f||"_",m++}o.answers.across.push(d);var h=t[d]||"";o.clues.across.push("".concat(c-1,". ").concat(h))}if(u){for(var b="",g=i;!p(q(e,g,l))&&g<r;){var v=q(e,g,l);b+=v||"_",g++}o.answers.down.push(b);var O=t[b]||"";o.clues.down.push("".concat(c-1,". ").concat(O))}}return o}function Re(e,t){switch(t.type){case h:return function(e,t){var n=e.history.undo;if(!n.length)return e;var r=Se({},e),a=n[n.length-1],o=n.slice(0,n.length-1);return r.grid=a,r.history={undo:o,redo:[e.grid].concat(Object(u.a)(e.history.redo))},r}(e);case b:return function(e,t){var n=e.history.redo;if(!n.length)return e;var r=Se({},e),a=n[0],o=n.slice(1);return r.grid=a,r.history={undo:[].concat(Object(u.a)(e.history.undo),[e.grid]),redo:o},r}(e);case g:return function(e,t){var n=Se({},e.wordToClue,{},t.payload);return Se({},e,{grid:Se({},e.grid,{},Pe(e.grid,n)),wordToClue:n})}(e,t);case v:return function(e,t){var n=Se({},e,{},t.payload);return n.grid=Se({},n.grid,{},Pe(n.grid,n.wordToClue)),n.history.undo=e.history.undo.slice(-ze),n.history.undo.push(e.grid),n.history.redo=[],n}(e,t);default:throw new Error("Unknown Action Type: "+t.type)}}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(){return{word:"",direction:d,coordinates:[]}}function Ne(e,t){switch(t.type){case O:return function(e,t){return Te({},e,{currentWord:Te({},e.currentWord,{},t.payload)})}(e,t);case w:return function(e,t){var n=e.currentWord,r=e.selected,a=t.payload,o=n;return a&&r&&a.row===r.row&&a.column===r.column&&(o=Te({},o,{direction:f(n.direction)?m:d})),Te({},e,{selected:a,currentWord:o})}(e,t);case y:return function(e,t){var n=t.payload,r=n.direction,a=n.selected;return Te({},e,{currentWord:Te({},De(),{direction:r}),selected:a})}(e,t);default:throw new Error("Unknown Action Type: "+t.type)}}var xe=n(54),Le=n(15),Ie=n(136),Ae=n(86),Fe=n(138),Ue=n(140),Me=n(137),Ge=Object(j.a)((function(e){return{root:{display:"flex"},title:{flexGrow:1},container:{paddingLeft:12,paddingRight:12,paddingTop:32},paper:{padding:10},scroll:{overflow:"scroll",maxHeight:"calc(100vh - 180px)"}}}));function _e(e){var t=e.children;return e.value!==e.index?a.a.createElement("div",null):a.a.createElement("div",null,t)}var Be=function(e){var t={title:"TODO: NY Times, Thu, Sep 11, 2008",author:"TODO: Caleb Madison",editor:"TODO: Will Shortz",copyright:"TODO: 2008, The New York Times",publisher:"TODO: The New York Times",date:"TODO: 9/11/2008",size:e,clues:{across:[],down:[]}};return Object.assign(t,{grid:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return""})),gridnums:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),circles:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0})),darkens:Object(u.a)(Array(t.size.rows*t.size.cols).keys()).map((function(e){return 0}))})};function Je(e){var t={};if(e.answers){var n=function(n){e.answers[n].filter((function(e){return!e.match("_")})).reduce((function(t,r,a){var o=(e.clues[n][a]||"").replace(/^ *[0-9]*\. */,"");return t[r]=o,t}),t)};n("down"),n("across")}return t}function He(e){var t=e||JSON.parse(localStorage.getItem("grid"))||Be({rows:15,cols:15});return{grid:t,wordToClue:Je(t),history:JSON.parse(localStorage.getItem("history"))||{undo:[],redo:[]}}}var Ve=He(),qe=a.a.createRef();function Ye(e){var t=e.children,n=Object(r.useState)("100%"),o=Object(l.a)(n,2),c=o[0],i=o[1],u=function(){qe.current&&i(qe.current.clientWidth)};return Object(r.useEffect)((function(){return window.addEventListener("resize",u),u(),function(){window.removeEventListener("resize",u)}}),[]),a.a.createElement("div",{ref:qe,style:{width:c,height:c}},t)}var Ke=a.a.createRef();var Qe=function(){var e=Ge(),t=Object(Le.a)(),n=Object(r.useState)(!1),o=Object(l.a)(n,2),c=o[0],d=o[1],m=Object(r.useState)(0),j=Object(l.a)(m,2),k=j[0],C=j[1],S=Object(r.useReducer)(Ne,{selected:null,currentWord:De()}),z=Object(l.a)(S,2),P=z[0],R=z[1],W=Object(r.useReducer)(Re,Ve),T=Object(l.a)(W,2),D=T[0],N=T[1],x=Object(r.useRef)(),L=D.grid,I=D.history,A=P.selected,F=P.currentWord,M=Object(r.useCallback)((function(e,t){N({type:g,payload:Object(i.a)({},e,t)})}),[]),G=Object(r.useCallback)((function(e){R({type:O,payload:e})}),[]),B=Object(r.useCallback)((function(e){R({type:w,payload:e})}),[]);Object(r.useEffect)((function(){localStorage.setItem("grid",JSON.stringify(L)),localStorage.setItem("history",JSON.stringify(I))}),[L,I]),Object(r.useEffect)((function(){var e=function(e){var t=e.direction,n=e.grid,r=e.selected;if(!r)return null;for(var a=function(e){return f(t)?q(n,r.row,e):q(n,e,r.column)},o=function(e){return f(t)?[r.row,e]:[e,r.column]},c=function(e){return f(t)?e<n.size.cols:e<n.size.rows},i=f(t)?r.column:r.row,l=i;i>0&&!p(a(i));)i--;for(;c(l)&&!p(a(l));)l++;p(a(i))&&i++;for(var u="",s=[],d=n.gridnums[V(n,o(i)[0],o(i)[1])],m=i;m<l;++m){var h=a(m);""===h&&(h="."),u+=h,s.push(o(m))}return{word:u,coordinates:s,clueNum:d}}({selected:A,direction:F.direction,grid:L});e&&G(e)}),[G,A,L,F.direction]);var H=Object(r.useCallback)((function(e,t){for(var n={},r=0;r<L.gridnums.length;++r)if(L.gridnums[r]==t){n={row:Math.floor(r/L.size.cols),column:Math.floor(r%L.size.cols)};break}R({type:y,payload:{direction:e,selected:n}})}),[L]),Y=Object(r.useCallback)((function(e,t,n){M(t,n)}),[M]),K=Object(r.useCallback)((function(e){var t=Object(_.cloneDeep)(L);F.coordinates.forEach((function(n,r){t.grid[V(L,n[0],n[1])]=e[r]})),Ke.current.focus(),N({type:v,payload:{grid:t}})}),[L,F]),Q=Object(s.a)(e.paper),X=Object(s.a)(e.paper,e.scroll),Z=new $({selected:A,setSelected:B,setCurrentWord:G,currentWord:F,grid:L,updateGrid:function(e){N(e===h||e===b?{type:e}:{type:v,payload:{grid:e}})}}),ee=a.a.createElement(ke,{ref:x,onSavePuzzle:function(){var e=new Blob([JSON.stringify(L)],{type:"text/plain;charset=utf-8"});Object(xe.saveAs)(e,"puzzle.json")},onImportPuzzle:function(e){var t=e.target;if(t.value){var n=new FileReader;n.onload=function(){var e=n.result,t=JSON.parse(e);N({type:v,payload:{grid:t,wordToClue:Je(t)}})},n.readAsText(t.files[0]),t.value=""}},onCreateNewPuzzle:function(e){N({type:v,payload:He(Be(e))}),B()},onUndo:function(){return N({type:h})},onRedo:function(){return N({type:b})},onRebus:function(e){return Z.handleLetter(e)},onCircle:function(){if(""===q(L,A.row,A.column));else{var e=L.circles[V(L,A.row,A.column)];e=1-e,Z.handleCircle(e)}},onDarken:function(){if("undefined"!==typeof L.darkens){var e=L.darkens[V(L,A.row,A.column)];e=1-e,Z.handleDarken(e)}}});Object(r.useEffect)((function(){window.matchMedia("print").addListener((function(e){return d(e.matches)})),window.onbeforeprint=function(){return d(!0)},window.onafterprint=function(){return d(!1)}}),[]);var te=Object(Ie.a)(t.breakpoints.up("lg"));if(c)return a.a.createElement(pe,{grid:L});var ne=[{label:"Word List",children:a.a.createElement(Ae.a,{className:X},a.a.createElement(J,{onClick:K,currentWord:F}))},{label:"Clues",children:a.a.createElement(Ae.a,{className:X},a.a.createElement(fe,{currentWord:F,grid:L,onClueFocus:H,onClueChanged:Y}))}],re=null,ae=a.a.createElement(ce,{keyPressHandler:Z,forwardRef:Ke,extraActions:x.current},a.a.createElement(Ae.a,{className:Q},a.a.createElement(Ye,null,a.a.createElement(E,{grid:L,selected:P.selected,currentWord:P.currentWord,onClick:B}))));te?re=ae:ne=[{label:"Grid",children:ae}].concat(Object(u.a)(ne));var oe=a.a.createElement(a.a.Fragment,null,a.a.createElement(Ue.a,{value:k,onChange:function(e,t){return C(t)}},ne.map((function(e){return a.a.createElement(Me.a,{key:e.label,label:e.label})}))),ne.map((function(e,t){return a.a.createElement(_e,{key:e.label,value:k,index:t},e.children)})));return a.a.createElement("div",{className:"App"},a.a.createElement(U,{actions:x.current}),a.a.createElement(Fe.a,{className:e.container},a.a.createElement(le.a,{container:!0,spacing:2},te&&a.a.createElement(le.a,{item:!0,lg:6},re),a.a.createElement(le.a,{item:!0,lg:6},oe))),ee)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.6215a923.chunk.js.map